<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <link rel="icon" href="../imgs/logo-symbol-light.png" type="image/icon type">
    <title> Post | Campus Connect </title>
    <link rel="stylesheet" href="post.css">
    <!-- Fontawesome CDN Link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
<body>
  <div class="container">
    <div id="createPostForm" class="forms">
      <div class="title-container">
        <div class="title">Post Information</div>
        <div class="logo">
          <a href="../index.html">
              <img src="../imgs/logo.png" alt="CampusConnect" height="31px">
          </a>
        </div>
      </div>
      <form action="#">
        <div class="input-boxes">
          <p><label for="info">Post Information</label></p>
          <div class="info">
            <textarea id="post" name="post" rows="7" cols="100"></textarea>
          </div>
          <p><label for="tags">Tags for the post</label></p>
          <div class="tags">
            <textarea id="tag" name="tag" rows="4" cols="100"></textarea>
          </div>
        </div>
        <div class="button-container">
          <div class="button input-box">
            <input type="submit" value="Submit" onclick="putThePostOn()">
          </div>
          <div class="button input-box">
            <input type="reset" value="Cancel" onclick="alert('Post cancelled.')">
          </div>
      </form>
    </div>
  </div>
<script>
    function putThePostOn() {
        // Get the form data
        const postContent = document.getElementById('post').value;
        const postTags = document.getElementById('tag').value;

        // Prepare the data for the POST request
        const postData = {
            postContent,
            postTags
        };

        // Send a POST request to the API
        fetch('http://localhost:4200/api/post', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(postData),
        })
        .then(response => response.json())
        .then(data => {
            // Handle the response data if needed
            console.log('Post created successfully:', data);
            // Redirect to index.html
            window.location.href = 'index.html';
        })
        .catch(error => {
            console.error('Error creating post:', error);
            // Handle errors
        });
    }
</script>

</body>

</html>